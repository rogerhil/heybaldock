{% extends "music/base.html" %}
{% load i18n %}

{% block stylesheet %}
{% endblock %}

{% block actions %}
    <a href="{% url main_repertory %}">{% trans 'Show Main Repertory' %}</a>
    {% if has_perm %}
        <a href="{% url add_event_repertory %}">{% trans "Add Repertory" %}</a>
    {% endif %}
{% endblock %}

{% block music_content %}
    <h1>{% trans "Repertories" %}</h1>
    {% if repertories %}
        <div class="table_list">
            <table>
                <thead>
                    <th>
                        {% trans "Related Event" %}
                    </th>
                    <th width="200px" class="center">
                        {% trans "Locked by" %}
                    </th>
                </thead>
                <tbody>
                    <tr style="background-color: #9acd32; color: #000000; font-weight: bold;" onclick="window.location = '{% url main_repertory %}'">
                        <td>{% trans "Main Repertory" %}. {% trans "This is the base for the repertories below." %}</td>
                        <td class="center">{% if main_repertory.is_free %}{% trans "Free" %}{% else %}<span style="color: red;">{{ main_repertory.user_lock.first_name }}</span>{% endif %}</td>
                    </tr>
                    {% for repertory in repertories %}
                    <tr class="{% cycle odd,even %}" onclick="window.location = '{% url event_repertory repertory.id %}'">
                        <td>
                            {% if repertory.event %}
                                Repertory of the event {{ repertory.event }}
                            {% else %}
                                Repertory of the rehearsal in {{ repertory.rehearsal.studio.name }} on {{ repertory.rehearsal.date }}
                            {% endif %}
                        </td>
                        <td class="center">{% if repertory.is_free %}{% trans "Free" %}{% else %}<span style="color: red;">{{ repertory.user_lock.get_full_name }}</span>{% endif %}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    {% else %}
        <p>{% trans "There are no repertories yet." %}</p>
        <p><a href="{% url main_repertory %}">{% trans "Click here to add songs to the main repertory." %}</a></p>
        <p><a href="{% url add_event_repertory %}">{% trans "Or click here to add new repertory based on event." %}</a></p>
    {% endif %}
{% endblock %}