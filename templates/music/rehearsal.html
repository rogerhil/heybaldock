{% extends "base.html" %}
{% load i18n %}

{% block stylesheet %}
    <script type="text/javascript" src="https://maps.google.com/maps/api/js?sensor=true"></script>
    <script type="text/javascript" src="/media/js/maps.js"></script>
{% endblock %}

{% block content %}

    <div class="manage_buttons">
        <a href="{% url rehearsals %}">{% trans "Rehearsals" %}</a>
        {% if permissions.manage_rehearsals %}
            <a href="{% url add_rehearsal %}">{% trans "Add" %}</a>
            <br/>
            <div class="clear"></div>
            <br/>
            <a href="{% url change_rehearsal rehearsal.id %}">{% trans "Change" %}</a>
            <a href="{% url remove_rehearsal rehearsal.id %}" class="red">{% trans "Remove" %}</a>
        {% endif %}
    </div>

    <div style="min-height: 250px;">
        <h1>
            {% blocktrans with rehearsal.studio.name as name %}
                Rehearsal in {{ name }}
            {% endblocktrans %}
        </h1>

        <p>
            <strong>{% trans "When" %}:</strong> {{ rehearsal.date }}
        </p>
        <p>
            <strong>{% trans "Where:" %}</strong> {{ rehearsal.studio.name }}
        </p>
        <p>
            <strong>{% trans "Duration" %}:</strong> {{ rehearsal.duration_display }}
        </p>
        <p>
            <strong>{% trans "Cost" %}:</strong> {{ rehearsal.cost }}
            {% if rehearsal.paid_by %}
                {% trans "paid by" %} {{ rehearsal.paid_by.get_full_name }}
            {% endif %}
        </p>
        {% if rehearsal.repertories.count %}
            <p>
                <strong>{% trans "Repertory: " %}</strong>
                {% for repertory in rehearsal.repertories.all %}
                    <a href="{% url event_repertory repertory.id %}">
                        {% trans "click here to see the repertory" %}
                    </a>
                {% endfor %}
            </p>
        {% else %}
            <p>
                <strong>{% trans "Repertory:" %}</strong>
                <a href="{% url add_event_repertory_for_rehearsal rehearsal.id %}" style="text-decoration: underline;">{% trans "Create a new one from scratch" %}</a>{% trans " or" %}
                <a href="{% url add_event_repertory_for_rehearsal rehearsal.id %}?import_from_last=1" style="text-decoration: underline;">{% trans "Create a repertory based on songs of the last rehearsal." %}</a>
            </p>
        {% endif %}

        <strong>{% trans "Notes:" %}</strong>
        <br/>
        {% autoescape off %}{{ rehearsal.notes }}{% endautoescape %}
        <br/>
        <div class="clear"></div>
        <br/>
        <h3>
            {% blocktrans with rehearsal.studio.name as name %}
                {{ name }} address
            {% endblocktrans %}
        </h3>
        <div class="clear"></div>
        {% with rehearsal.studio as location %}
            {% include "event/location_address.html" %}
        {% endwith %}
    </div>

{% endblock %}